:root{
  --bg: #0f1724;
  --book-color: #2b1f12;
  --page-color: #fffaf0;
  --accent: #ffd96b;
  --focus: rgba(255,217,100,0.15);
}

/* reset & base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background:
    radial-gradient(ellipse at 20% 10%, rgba(255,220,120,0.04), transparent 8%),
    linear-gradient(180deg, var(--bg) 0%, #071023 100%);
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
}

/* scène */
.scene{
  width:100%;
  max-width:900px;
  height:70vh;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:1200px;
}

/* canvas */
#particles{
  position:absolute;
  left:0; top:0; width:100%; height:100%;
  pointer-events:none;
  z-index:5;
}

/* livre */
.book{
  width:480px;
  height:280px;
  position:relative;
  transform-style:preserve-3d;
  transition: transform 900ms cubic-bezier(.2,.9,.3,1);
  cursor:pointer;
  z-index:2;
  outline: none;
  -webkit-tap-highlight-color: transparent;
  will-change: transform;
  user-select: none;
}

/* focus visible */
.book:focus-visible{
  box-shadow: 0 6px 30px var(--focus), inset 0 0 0 3px rgba(255,217,100,0.06);
  border-radius:6px;
}

/* couvercles */
.cover{
  position:absolute;
  width:50%;
  height:100%;
  top:0;
  background: linear-gradient(180deg, #3a2a18, #24180f);
  box-shadow:0 10px 30px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.03);
  backface-visibility: hidden;
  transition: transform 900ms cubic-bezier(.2,.9,.2,1);
}

/* couvercle gauche */
.cover.left{
  left:0;
  transform-origin: right center;
  border-right: 1px solid rgba(0,0,0,0.25);
  transform: rotateY(0deg);
}

/* couvercle droit */
.cover.right{
  right:0;
  left:auto;
  transform-origin: left center;
  border-left: 1px solid rgba(0,0,0,0.14);
  transform: rotateY(0deg);
}

/* pages */
.pages{
  position:absolute;
  left:25%;
  width:50%;
  height:100%;
  top:0;
  transform-origin:center center;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:1;
  pointer-events:none;
  transition: transform 900ms cubic-bezier(.2,.9,.2,1);
}

/* page */
.page{
  position:absolute;
  width:95%;
  height:96%;
  background: linear-gradient(180deg, var(--page-color), #f7f1e6);
  box-shadow: 0 6px 20px rgba(0,0,0,0.35);
  border-radius:2px;
  left:2.5%;
  top:2%;
  transform-origin: left center;
  backface-visibility: hidden;
  overflow:hidden;
  transition: transform 900ms cubic-bezier(.2,.9,.2,1);
}

/* textures "texte" */
.page::before{
  content:"";
  position:absolute;
  inset:20px 18px;
  background-image: linear-gradient(to bottom, rgba(0,0,0,0.06) 1px, transparent 1px);
  background-size:100% 18px;
  opacity:0.7;
}

/* état ouvert */
.book.open .cover.left{
  transform: rotateY(-140deg);
  transition: transform 1000ms cubic-bezier(.2,.9,.2,1);
}
.book.open .cover.right{
  transform: rotateY(10deg);
  transition: transform 900ms cubic-bezier(.2,.9,.2,1);
}
.book.open .pages{
  transform: translateZ(18px);
}
.book.open .page1{
  transform: rotateY(-14deg) translateX(-6px);
}
.book.open .page2{
  transform: rotateY(-6deg) translateX(-2px);
}

/* tranche centrale */
.book::after{
  content:"";
  position:absolute;
  left:49.2%;
  width:1.6%;
  height:100%;
  top:0;
  background: linear-gradient(180deg, rgba(0,0,0,0.15), rgba(0,0,0,0.05));
  z-index:3;
  pointer-events:none;
}

/* responsive */
@media (max-width:520px){
  .book{ width:320px; height:200px; }
}

/* réduction des animations si user préfère */
@media (prefers-reduced-motion: reduce){
  *{ transition: none !important; animation: none !important; }
}
